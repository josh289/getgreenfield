---
import Section from '../shared/Section.astro';
import SectionTitle from '../shared/SectionTitle.astro';

const gates = [
  { name: 'TypeScript Strict Compilation', description: 'No errors. No warnings. No \'any\' types.' },
  { name: 'Contract Validation', description: 'All typed service contracts verified at compile time.' },
  { name: 'Two-Layer Auth Verification', description: 'Permission checks at gateway. Policy checks in handlers.' },
  { name: 'Test Execution', description: 'All unit, integration, and contract tests must pass.' },
  { name: 'Coverage Gates', description: '90%+ branches, functions, lines, and statements. Enforced.' },
  { name: 'Tracing Verification', description: 'Every request path traced end-to-end through OpenTelemetry.' },
  { name: 'Lint and Format', description: 'Biome enforcement. Consistent code style across all services.' },
];
---

<Section background="primary">
  <SectionTitle
    title="What the quality gates enforce."
  />
  <div class="max-w-3xl">
    <p class="text-ev-text-secondary leading-relaxed mb-8" data-reveal>
      Every service passes through the same automated verification pipeline before it ships. These are not optional checks. They are gates. If a service does not pass, it does not ship.
    </p>
    <div class="relative">
      <!-- Source -->
      <div class="text-center mb-4" data-reveal>
        <span class="inline-block px-4 py-2 rounded-md bg-ev-void border border-ev-default text-ev-text font-mono text-sm">SOURCE CODE</span>
      </div>

      <!-- Gates -->
      <div class="space-y-3">
        {gates.map((gate, i) => (
          <div data-reveal data-delay={String((i + 1) * 80)}>
            <div class="flex items-center justify-center mb-3">
              <svg class="w-4 h-4 text-sprout/40" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
            </div>
            <div class="flex items-center gap-4 p-4 rounded-lg bg-ev-void border border-ev-default">
              <div class="w-8 h-8 rounded-full bg-sprout/10 border border-sprout/30 flex items-center justify-center shrink-0">
                <svg class="w-4 h-4 text-sprout" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" /></svg>
              </div>
              <div>
                <h4 class="text-sm font-semibold text-ev-text">{gate.name}</h4>
                <p class="text-xs text-ev-text-muted">{gate.description}</p>
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- Output -->
      <div class="flex items-center justify-center mt-3">
        <svg class="w-4 h-4 text-sprout/40" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3" /></svg>
      </div>
      <div class="text-center mt-4" data-reveal>
        <span class="inline-block px-4 py-2 rounded-md bg-sprout/10 border border-sprout/20 text-sprout font-mono text-sm">PRODUCTION-READY SERVICE</span>
      </div>
    </div>
    <p class="text-ev-text font-medium mt-8 text-center" data-reveal>
      No exceptions. No waivers. No "we will fix it later." If the gate is red, the service does not ship.
    </p>
  </div>
</Section>
